package execucao.bugs;

import engine.Motor;
import execucao.GerenciadorDeTrocasTest;
import json.ControladorCustomDeserializer;
import models.Controlador;
import models.EstadoGrupoSemaforico;
import org.joda.time.DateTime;
import org.junit.Test;
import play.libs.Json;

import java.io.IOException;

import static org.junit.Assert.assertEquals;
import static org.junit.Assert.assertTrue;


/**
 * Created by rodrigosol on 9/8/16.
 */
public class ModoManualCoordenadoInicioTest extends GerenciadorDeTrocasTest {


    private Controlador getControlador() {
        StringBuffer controladorJson = new StringBuffer();
        controladorJson.append("{\"id\":\"1330eb94-f9ae-4010-ac77-4e82b0d17f7d\",\"versoesTabelasHorarias\":[{\"id\":\"66ca0555-842f-4ebe-8b89-a57d04c43048\",\"idJson\":\"016ada66-7334-4c3e-8b2d-65a4773cc0b6\",\"statusVersao\":\"EDITANDO\",\"tabelaHoraria\":{\"idJson\":\"df0ebbea-4220-4974-89cc-8797bb06176e\"},\"dataCriacao\":\"28/11/2016 17:57:22\",\"dataAtualizacao\":\"28/11/2016 18:00:32\"}],\"numeroSMEE\":\"1212\",\"sequencia\":2,\"limiteEstagio\":16,\"limiteGrupoSemaforico\":16,\"limiteAnel\":4,\"limiteDetectorPedestre\":4,\"limiteDetectorVeicular\":8,\"limiteTabelasEntreVerdes\":2,\"limitePlanos\":16,\"nomeEndereco\":\"R. Aspicuelta, nº 12\",\"dataCriacao\":\"28/11/2016 17:54:14\",\"dataAtualizacao\":\"28/11/2016 18:00:31\",\"CLC\":\"1.000.0002\",\"bloqueado\":false,\"planosBloqueado\":false,\"verdeMin\":\"1\",\"verdeMax\":\"255\",\"verdeMinimoMin\":\"10\",\"verdeMinimoMax\":\"255\",\"verdeMaximoMin\":\"10\",\"verdeMaximoMax\":\"255\",\"extensaoVerdeMin\":\"1.0\",\"extensaoVerdeMax\":\"10.0\",\"verdeIntermediarioMin\":\"10\",\"verdeIntermediarioMax\":\"255\",\"defasagemMin\":\"0\",\"defasagemMax\":\"255\",\"amareloMin\":\"3\",\"amareloMax\":\"5\",\"vermelhoIntermitenteMin\":\"3\",\"vermelhoIntermitenteMax\":\"32\",\"vermelhoLimpezaVeicularMin\":\"0\",\"vermelhoLimpezaVeicularMax\":\"20\",\"vermelhoLimpezaPedestreMin\":\"0\",\"vermelhoLimpezaPedestreMax\":\"5\",\"atrasoGrupoMin\":\"0\",\"atrasoGrupoMax\":\"20\",\"verdeSegurancaVeicularMin\":\"10\",\"verdeSegurancaVeicularMax\":\"30\",\"verdeSegurancaPedestreMin\":\"4\",\"verdeSegurancaPedestreMax\":\"10\",\"maximoPermanenciaEstagioMin\":\"20\",\"maximoPermanenciaEstagioMax\":\"255\",\"defaultMaximoPermanenciaEstagioVeicular\":127,\"cicloMin\":\"30\",\"cicloMax\":\"255\",\"ausenciaDeteccaoMin\":\"0\",\"ausenciaDeteccaoMax\":\"5800\",\"deteccaoPermanenteMin\":\"0\",\"deteccaoPermanenteMax\":\"10\",\"statusControlador\":\"EM_CONFIGURACAO\",\"statusControladorReal\":\"EM_CONFIGURACAO\",\"area\":{\"idJson\":\"011f16c3-b59e-11e6-970d-0401fa9c1b01\"},\"endereco\":{\"idJson\":\"ba1e6e7d-7a41-4865-8956-0f628b2c45b5\"},\"modelo\":{\"id\":\"011f2a13-b59e-11e6-970d-0401fa9c1b01\",\"idJson\":\"011f2a2c-b59e-11e6-970d-0401fa9c1b01\",\"descricao\":\"Modelo Básico\",\"fabricante\":{\"id\":\"011f1c41-b59e-11e6-970d-0401fa9c1b01\",\"nome\":\"Raro Labs\"}},\"aneis\":[{\"id\":\"5845fd06-f703-4ae0-9d3d-02e35b962f0e\",\"idJson\":\"c4354757-6e29-45cf-802c-96772b1420da\",\"ativo\":false,\"aceitaModoManual\":true,\"posicao\":3,\"CLA\":\"1.000.0002.3\",\"estagios\":[],\"gruposSemaforicos\":[],\"detectores\":[],\"planos\":[]},{\"id\":\"777710a1-78af-4558-bc29-ce2f9e704eb2\",\"idJson\":\"1d2a8161-f140-457b-a914-869f32411d2c\",\"ativo\":false,\"aceitaModoManual\":true,\"posicao\":2,\"CLA\":\"1.000.0002.2\",\"estagios\":[],\"gruposSemaforicos\":[],\"detectores\":[],\"planos\":[]},{\"id\":\"7daa02ba-6d3f-4888-806a-16c7e78b87b1\",\"idJson\":\"76367806-91ad-4aab-a29f-c94bf7e7f7b6\",\"numeroSMEE\":\"1212\",\"ativo\":true,\"aceitaModoManual\":true,\"posicao\":1,\"CLA\":\"1.000.0002.1\",\"versaoPlano\":{\"idJson\":\"dbffeba4-9382-4f0d-af77-b481c61d9095\"},\"estagios\":[{\"idJson\":\"d934011e-2b46-4992-9ac8-c4d9855c2bed\"},{\"idJson\":\"29eabd04-3cf0-421c-a52a-e34b10d6cc0a\"},{\"idJson\":\"04a3a4c3-50bc-4457-9761-64936a0bb51a\"}],\"gruposSemaforicos\":[{\"idJson\":\"99967b89-c86e-481b-baa3-006abeac68b4\"},{\"idJson\":\"ed688254-c735-41c5-a832-6d1581abddbf\"},{\"idJson\":\"32423001-0eb5-40ad-8eb6-f0884280fb6c\"}],\"detectores\":[{\"idJson\":\"ed1d08df-645e-415d-bcbc-4fa36116629c\"}],\"planos\":[{\"idJson\":\"5e496875-25fd-427a-91ca-f0ebfd2bd857\"}],\"endereco\":{\"idJson\":\"a76a8215-10d3-4134-996d-00c1a588d0e3\"}},{\"id\":\"df924a74-d6e4-454e-8b4b-7feb17017b53\",\"idJson\":\"5015e7d4-b532-438e-a7ed-ace95f5b535d\",\"ativo\":false,\"aceitaModoManual\":true,\"posicao\":4,\"CLA\":\"1.000.0002.4\",\"estagios\":[],\"gruposSemaforicos\":[],\"detectores\":[],\"planos\":[]}],\"estagios\":[{\"id\":\"04d9994a-bfe4-4db3-8f16-977f51918a1f\",\"idJson\":\"d934011e-2b46-4992-9ac8-c4d9855c2bed\",\"tempoMaximoPermanencia\":20,\"tempoMaximoPermanenciaAtivado\":true,\"demandaPrioritaria\":false,\"tempoVerdeDemandaPrioritaria\":1,\"posicao\":3,\"anel\":{\"idJson\":\"76367806-91ad-4aab-a29f-c94bf7e7f7b6\"},\"imagem\":{\"idJson\":\"03444c62-1d1e-4a54-955c-ffdc3e761cb1\"},\"detector\":{\"idJson\":\"ed1d08df-645e-415d-bcbc-4fa36116629c\"},\"origemDeTransicoesProibidas\":[],\"destinoDeTransicoesProibidas\":[],\"alternativaDeTransicoesProibidas\":[],\"estagiosGruposSemaforicos\":[{\"idJson\":\"58b2749a-7b33-4672-9aed-2057e2ecf344\"}],\"estagiosPlanos\":[{\"idJson\":\"f27eab33-759f-4054-8052-afb8dbb10f44\"}]},{\"id\":\"81fb8500-ef7c-461f-8f4b-1d61380d4e46\",\"idJson\":\"04a3a4c3-50bc-4457-9761-64936a0bb51a\",\"tempoMaximoPermanencia\":127,\"tempoMaximoPermanenciaAtivado\":true,\"demandaPrioritaria\":false,\"tempoVerdeDemandaPrioritaria\":1,\"posicao\":2,\"anel\":{\"idJson\":\"76367806-91ad-4aab-a29f-c94bf7e7f7b6\"},\"imagem\":{\"idJson\":\"eb1ab4ef-9e7f-4cd0-bfc1-68cfae9137e6\"},\"origemDeTransicoesProibidas\":[],\"destinoDeTransicoesProibidas\":[],\"alternativaDeTransicoesProibidas\":[],\"estagiosGruposSemaforicos\":[{\"idJson\":\"43426beb-4698-4dac-9c1d-905f79568666\"}],\"estagiosPlanos\":[{\"idJson\":\"21915fe2-91d1-40c2-a1b2-481d29a5fbf6\"}]},{\"id\":\"117db490-c93a-492a-a561-c6779913e870\",\"idJson\":\"29eabd04-3cf0-421c-a52a-e34b10d6cc0a\",\"tempoMaximoPermanencia\":127,\"tempoMaximoPermanenciaAtivado\":true,\"demandaPrioritaria\":false,\"tempoVerdeDemandaPrioritaria\":1,\"posicao\":1,\"anel\":{\"idJson\":\"76367806-91ad-4aab-a29f-c94bf7e7f7b6\"},\"imagem\":{\"idJson\":\"d2faeca8-6bf8-4b39-9ecb-077d5926f573\"},\"origemDeTransicoesProibidas\":[],\"destinoDeTransicoesProibidas\":[],\"alternativaDeTransicoesProibidas\":[],\"estagiosGruposSemaforicos\":[{\"idJson\":\"45046e87-c54d-4b26-8a8f-6995d2c7cff7\"}],\"estagiosPlanos\":[{\"idJson\":\"c412ba44-9155-4668-ac91-051032028340\"}]}],\"gruposSemaforicos\":[{\"id\":\"2dbf7cb1-7293-4e40-9826-2e8c49167bcd\",\"idJson\":\"ed688254-c735-41c5-a832-6d1581abddbf\",\"tipo\":\"VEICULAR\",\"posicao\":2,\"faseVermelhaApagadaAmareloIntermitente\":true,\"tempoVerdeSeguranca\":10,\"anel\":{\"idJson\":\"76367806-91ad-4aab-a29f-c94bf7e7f7b6\"},\"verdesConflitantesOrigem\":[{\"idJson\":\"46bce5ca-88e3-4bed-a189-9b4ff4737184\"}],\"verdesConflitantesDestino\":[{\"idJson\":\"842a693f-3bf2-4487-a2b5-036815067d76\"}],\"estagiosGruposSemaforicos\":[{\"idJson\":\"43426beb-4698-4dac-9c1d-905f79568666\"}],\"transicoes\":[{\"idJson\":\"411745e8-6af8-49a7-bf5c-337914ebb84d\"},{\"idJson\":\"0098bc1c-224a-4eab-81c4-57f08cc0c015\"}],\"transicoesComGanhoDePassagem\":[{\"idJson\":\"c0d4ce4a-db09-462e-b229-caddd4c20d74\"},{\"idJson\":\"b5cd8427-0b2e-4a22-905c-a8ebed2506ab\"}],\"tabelasEntreVerdes\":[{\"idJson\":\"c141a89c-7137-4b67-ad17-060eaaabe928\"}]},{\"id\":\"2911587a-242b-4cf7-ac30-d285b12a036f\",\"idJson\":\"99967b89-c86e-481b-baa3-006abeac68b4\",\"tipo\":\"VEICULAR\",\"posicao\":1,\"faseVermelhaApagadaAmareloIntermitente\":true,\"tempoVerdeSeguranca\":10,\"anel\":{\"idJson\":\"76367806-91ad-4aab-a29f-c94bf7e7f7b6\"},\"verdesConflitantesOrigem\":[{\"idJson\":\"842a693f-3bf2-4487-a2b5-036815067d76\"}],\"verdesConflitantesDestino\":[],\"estagiosGruposSemaforicos\":[{\"idJson\":\"45046e87-c54d-4b26-8a8f-6995d2c7cff7\"}],\"transicoes\":[{\"idJson\":\"2d4b9eca-e19d-46d3-b0d0-81d4aeb9e1bd\"},{\"idJson\":\"8c2670ad-d43b-4f9d-bee2-8eb9e39f260c\"}],\"transicoesComGanhoDePassagem\":[{\"idJson\":\"8f2122fb-6b88-4c60-bbbd-0c6bb5fa81c4\"},{\"idJson\":\"58c4ad30-c22d-4c6b-b3f3-35b8e7208c7c\"}],\"tabelasEntreVerdes\":[{\"idJson\":\"c19f1df8-0431-4862-abd2-227d86b4dd75\"}]},{\"id\":\"d6b85783-f1d1-4a2a-a446-6505921810b1\",\"idJson\":\"32423001-0eb5-40ad-8eb6-f0884280fb6c\",\"tipo\":\"PEDESTRE\",\"posicao\":3,\"faseVermelhaApagadaAmareloIntermitente\":false,\"tempoVerdeSeguranca\":4,\"anel\":{\"idJson\":\"76367806-91ad-4aab-a29f-c94bf7e7f7b6\"},\"verdesConflitantesOrigem\":[],\"verdesConflitantesDestino\":[{\"idJson\":\"46bce5ca-88e3-4bed-a189-9b4ff4737184\"}],\"estagiosGruposSemaforicos\":[{\"idJson\":\"58b2749a-7b33-4672-9aed-2057e2ecf344\"}],\"transicoes\":[{\"idJson\":\"91f86ac8-137d-4efe-af0c-83fec25e7374\"},{\"idJson\":\"c2f31707-d6b1-43ea-8f52-392edae55140\"}],\"transicoesComGanhoDePassagem\":[{\"idJson\":\"90a3c380-9101-4576-92ec-0ebda9615cd5\"},{\"idJson\":\"0d222789-1608-420a-b370-0e1ce17a39cc\"}],\"tabelasEntreVerdes\":[{\"idJson\":\"e4390db1-342b-4f1b-801b-dc7e8540b649\"}]}],\"detectores\":[{\"id\":\"6f672c23-9b38-48fa-92c3-4644b287bb38\",\"idJson\":\"ed1d08df-645e-415d-bcbc-4fa36116629c\",\"tipo\":\"PEDESTRE\",\"posicao\":1,\"monitorado\":true,\"tempoAusenciaDeteccao\":0,\"tempoDeteccaoPermanente\":0,\"anel\":{\"idJson\":\"76367806-91ad-4aab-a29f-c94bf7e7f7b6\"},\"estagio\":{\"idJson\":\"d934011e-2b46-4992-9ac8-c4d9855c2bed\"}}],\"transicoesProibidas\":[],\"estagiosGruposSemaforicos\":[{\"id\":\"8ea9952c-5095-4e55-aaf4-a3608868f35f\",\"idJson\":\"43426beb-4698-4dac-9c1d-905f79568666\",\"estagio\":{\"idJson\":\"04a3a4c3-50bc-4457-9761-64936a0bb51a\"},\"grupoSemaforico\":{\"idJson\":\"ed688254-c735-41c5-a832-6d1581abddbf\"}},{\"id\":\"2887389a-5588-4089-8cfc-33acad43d645\",\"idJson\":\"45046e87-c54d-4b26-8a8f-6995d2c7cff7\",\"estagio\":{\"idJson\":\"29eabd04-3cf0-421c-a52a-e34b10d6cc0a\"},\"grupoSemaforico\":{\"idJson\":\"99967b89-c86e-481b-baa3-006abeac68b4\"}},{\"id\":\"1260d411-7d60-46f3-8f8b-089e0f365f80\",\"idJson\":\"58b2749a-7b33-4672-9aed-2057e2ecf344\",\"estagio\":{\"idJson\":\"d934011e-2b46-4992-9ac8-c4d9855c2bed\"},\"grupoSemaforico\":{\"idJson\":\"32423001-0eb5-40ad-8eb6-f0884280fb6c\"}}],\"verdesConflitantes\":[{\"id\":\"b7806d6e-8fb2-4090-a26e-9dc40171c6e3\",\"idJson\":\"842a693f-3bf2-4487-a2b5-036815067d76\",\"origem\":{\"idJson\":\"99967b89-c86e-481b-baa3-006abeac68b4\"},\"destino\":{\"idJson\":\"ed688254-c735-41c5-a832-6d1581abddbf\"}},{\"id\":\"353e4389-a6fc-4666-888a-e2a69c6025d3\",\"idJson\":\"46bce5ca-88e3-4bed-a189-9b4ff4737184\",\"origem\":{\"idJson\":\"ed688254-c735-41c5-a832-6d1581abddbf\"},\"destino\":{\"idJson\":\"32423001-0eb5-40ad-8eb6-f0884280fb6c\"}}],\"transicoes\":[{\"id\":\"b6791e64-e3ce-4387-a133-ff80a8feb3d6\",\"idJson\":\"411745e8-6af8-49a7-bf5c-337914ebb84d\",\"origem\":{\"idJson\":\"04a3a4c3-50bc-4457-9761-64936a0bb51a\"},\"destino\":{\"idJson\":\"d934011e-2b46-4992-9ac8-c4d9855c2bed\"},\"tabelaEntreVerdesTransicoes\":[{\"idJson\":\"5b25d5c2-34fc-4e42-a4bc-7236b8bac282\"}],\"grupoSemaforico\":{\"idJson\":\"ed688254-c735-41c5-a832-6d1581abddbf\"},\"tipo\":\"PERDA_DE_PASSAGEM\",\"tempoAtrasoGrupo\":\"0\",\"atrasoDeGrupo\":{\"idJson\":\"dace7f1a-0f11-4005-8581-2342d6a5db60\"},\"modoIntermitenteOuApagado\":true},{\"id\":\"db10c2c4-16e8-4654-90c6-51a8a22e4f7e\",\"idJson\":\"0098bc1c-224a-4eab-81c4-57f08cc0c015\",\"origem\":{\"idJson\":\"04a3a4c3-50bc-4457-9761-64936a0bb51a\"},\"destino\":{\"idJson\":\"29eabd04-3cf0-421c-a52a-e34b10d6cc0a\"},\"tabelaEntreVerdesTransicoes\":[{\"idJson\":\"a2c5a43f-9963-4c7c-880b-bd34201c430f\"}],\"grupoSemaforico\":{\"idJson\":\"ed688254-c735-41c5-a832-6d1581abddbf\"},\"tipo\":\"PERDA_DE_PASSAGEM\",\"tempoAtrasoGrupo\":\"8\",\"atrasoDeGrupo\":{\"idJson\":\"68902c53-debd-4e91-b14d-0a6c4d07c49b\"},\"modoIntermitenteOuApagado\":false},{\"id\":\"78c01ee7-afd4-41b9-a5fa-80df2e216157\",\"idJson\":\"8c2670ad-d43b-4f9d-bee2-8eb9e39f260c\",\"origem\":{\"idJson\":\"29eabd04-3cf0-421c-a52a-e34b10d6cc0a\"},\"destino\":{\"idJson\":\"04a3a4c3-50bc-4457-9761-64936a0bb51a\"},\"tabelaEntreVerdesTransicoes\":[{\"idJson\":\"3864c39a-e021-45e1-b289-f6b8b7d8be99\"}],\"grupoSemaforico\":{\"idJson\":\"99967b89-c86e-481b-baa3-006abeac68b4\"},\"tipo\":\"PERDA_DE_PASSAGEM\",\"tempoAtrasoGrupo\":\"0\",\"atrasoDeGrupo\":{\"idJson\":\"17ea15ba-ab9d-41ce-b521-b3356c7af984\"},\"modoIntermitenteOuApagado\":true},{\"id\":\"687cc2f4-2579-4c1a-a009-ca4f0a803627\",\"idJson\":\"c2f31707-d6b1-43ea-8f52-392edae55140\",\"origem\":{\"idJson\":\"d934011e-2b46-4992-9ac8-c4d9855c2bed\"},\"destino\":{\"idJson\":\"04a3a4c3-50bc-4457-9761-64936a0bb51a\"},\"tabelaEntreVerdesTransicoes\":[{\"idJson\":\"7c194d5c-ac0b-4617-9d15-5f7d73469890\"}],\"grupoSemaforico\":{\"idJson\":\"32423001-0eb5-40ad-8eb6-f0884280fb6c\"},\"tipo\":\"PERDA_DE_PASSAGEM\",\"tempoAtrasoGrupo\":\"0\",\"atrasoDeGrupo\":{\"idJson\":\"c7f3393c-210f-420f-addd-439af94562d6\"},\"modoIntermitenteOuApagado\":true},{\"id\":\"48b22baa-8684-47ed-9dfa-57af4ad6fccd\",\"idJson\":\"2d4b9eca-e19d-46d3-b0d0-81d4aeb9e1bd\",\"origem\":{\"idJson\":\"29eabd04-3cf0-421c-a52a-e34b10d6cc0a\"},\"destino\":{\"idJson\":\"d934011e-2b46-4992-9ac8-c4d9855c2bed\"},\"tabelaEntreVerdesTransicoes\":[{\"idJson\":\"496b48f5-41d3-4d4b-bebb-e7f3f47af208\"}],\"grupoSemaforico\":{\"idJson\":\"99967b89-c86e-481b-baa3-006abeac68b4\"},\"tipo\":\"PERDA_DE_PASSAGEM\",\"tempoAtrasoGrupo\":\"3\",\"atrasoDeGrupo\":{\"idJson\":\"e8c8f964-6a45-477e-9674-7927e226af33\"},\"modoIntermitenteOuApagado\":false},{\"id\":\"5f6ae150-cfd7-473f-ad98-f804739081f4\",\"idJson\":\"91f86ac8-137d-4efe-af0c-83fec25e7374\",\"origem\":{\"idJson\":\"d934011e-2b46-4992-9ac8-c4d9855c2bed\"},\"destino\":{\"idJson\":\"29eabd04-3cf0-421c-a52a-e34b10d6cc0a\"},\"tabelaEntreVerdesTransicoes\":[{\"idJson\":\"2234f209-52da-40ee-a716-ec55c1af0796\"}],\"grupoSemaforico\":{\"idJson\":\"32423001-0eb5-40ad-8eb6-f0884280fb6c\"},\"tipo\":\"PERDA_DE_PASSAGEM\",\"tempoAtrasoGrupo\":\"0\",\"atrasoDeGrupo\":{\"idJson\":\"2d4d4b20-e270-4e79-8e55-9d0f8135e9e8\"},\"modoIntermitenteOuApagado\":false}],\"transicoesComGanhoDePassagem\":[{\"id\":\"8e0de28d-70f3-4d00-b50e-9074d53f56a2\",\"idJson\":\"58c4ad30-c22d-4c6b-b3f3-35b8e7208c7c\",\"origem\":{\"idJson\":\"d934011e-2b46-4992-9ac8-c4d9855c2bed\"},\"destino\":{\"idJson\":\"29eabd04-3cf0-421c-a52a-e34b10d6cc0a\"},\"tabelaEntreVerdesTransicoes\":[],\"grupoSemaforico\":{\"idJson\":\"99967b89-c86e-481b-baa3-006abeac68b4\"},\"tipo\":\"GANHO_DE_PASSAGEM\",\"tempoAtrasoGrupo\":\"0\",\"atrasoDeGrupo\":{\"idJson\":\"d35d6a1d-cfc8-44be-bfcc-cea874eab7ec\"},\"modoIntermitenteOuApagado\":false},{\"id\":\"065625a8-47f6-4624-9c01-cf0dc0792e79\",\"idJson\":\"8f2122fb-6b88-4c60-bbbd-0c6bb5fa81c4\",\"origem\":{\"idJson\":\"04a3a4c3-50bc-4457-9761-64936a0bb51a\"},\"destino\":{\"idJson\":\"29eabd04-3cf0-421c-a52a-e34b10d6cc0a\"},\"tabelaEntreVerdesTransicoes\":[],\"grupoSemaforico\":{\"idJson\":\"99967b89-c86e-481b-baa3-006abeac68b4\"},\"tipo\":\"GANHO_DE_PASSAGEM\",\"tempoAtrasoGrupo\":\"0\",\"atrasoDeGrupo\":{\"idJson\":\"f65ec46e-9f38-48d9-8042-e0ba9319e712\"},\"modoIntermitenteOuApagado\":false},{\"id\":\"9664a521-dcf4-4b26-82e6-dc6ac8db10d2\",\"idJson\":\"0d222789-1608-420a-b370-0e1ce17a39cc\",\"origem\":{\"idJson\":\"04a3a4c3-50bc-4457-9761-64936a0bb51a\"},\"destino\":{\"idJson\":\"d934011e-2b46-4992-9ac8-c4d9855c2bed\"},\"tabelaEntreVerdesTransicoes\":[],\"grupoSemaforico\":{\"idJson\":\"32423001-0eb5-40ad-8eb6-f0884280fb6c\"},\"tipo\":\"GANHO_DE_PASSAGEM\",\"tempoAtrasoGrupo\":\"0\",\"atrasoDeGrupo\":{\"idJson\":\"0e1d4d6c-7029-4129-a32c-31381775c1fc\"},\"modoIntermitenteOuApagado\":false},{\"id\":\"c73bf77a-5a99-43c0-9b91-c70450ab062e\",\"idJson\":\"b5cd8427-0b2e-4a22-905c-a8ebed2506ab\",\"origem\":{\"idJson\":\"d934011e-2b46-4992-9ac8-c4d9855c2bed\"},\"destino\":{\"idJson\":\"04a3a4c3-50bc-4457-9761-64936a0bb51a\"},\"tabelaEntreVerdesTransicoes\":[],\"grupoSemaforico\":{\"idJson\":\"ed688254-c735-41c5-a832-6d1581abddbf\"},\"tipo\":\"GANHO_DE_PASSAGEM\",\"tempoAtrasoGrupo\":\"0\",\"atrasoDeGrupo\":{\"idJson\":\"98aa52c7-6e94-4f98-952d-0c00988d5583\"},\"modoIntermitenteOuApagado\":false},{\"id\":\"bcc50b79-b579-42fe-895f-97ad30e3888f\",\"idJson\":\"c0d4ce4a-db09-462e-b229-caddd4c20d74\",\"origem\":{\"idJson\":\"29eabd04-3cf0-421c-a52a-e34b10d6cc0a\"},\"destino\":{\"idJson\":\"04a3a4c3-50bc-4457-9761-64936a0bb51a\"},\"tabelaEntreVerdesTransicoes\":[],\"grupoSemaforico\":{\"idJson\":\"ed688254-c735-41c5-a832-6d1581abddbf\"},\"tipo\":\"GANHO_DE_PASSAGEM\",\"tempoAtrasoGrupo\":\"0\",\"atrasoDeGrupo\":{\"idJson\":\"d79ebc95-b25c-411d-a830-c69b2d4b460b\"},\"modoIntermitenteOuApagado\":false},{\"id\":\"787bd695-f03e-4685-b2a3-893b8743fac3\",\"idJson\":\"90a3c380-9101-4576-92ec-0ebda9615cd5\",\"origem\":{\"idJson\":\"29eabd04-3cf0-421c-a52a-e34b10d6cc0a\"},\"destino\":{\"idJson\":\"d934011e-2b46-4992-9ac8-c4d9855c2bed\"},\"tabelaEntreVerdesTransicoes\":[],\"grupoSemaforico\":{\"idJson\":\"32423001-0eb5-40ad-8eb6-f0884280fb6c\"},\"tipo\":\"GANHO_DE_PASSAGEM\",\"tempoAtrasoGrupo\":\"9\",\"atrasoDeGrupo\":{\"idJson\":\"7844c8e7-061a-4f72-8916-0a8129c065a9\"},\"modoIntermitenteOuApagado\":false}],\"tabelasEntreVerdes\":[{\"id\":\"94940968-da0f-40f3-8ccb-194b3ad020b7\",\"idJson\":\"c19f1df8-0431-4862-abd2-227d86b4dd75\",\"descricao\":\"PADRÃO\",\"posicao\":1,\"grupoSemaforico\":{\"idJson\":\"99967b89-c86e-481b-baa3-006abeac68b4\"},\"tabelaEntreVerdesTransicoes\":[{\"idJson\":\"3864c39a-e021-45e1-b289-f6b8b7d8be99\"},{\"idJson\":\"496b48f5-41d3-4d4b-bebb-e7f3f47af208\"}]},{\"id\":\"c410e21b-6d9f-4e5a-9f20-5706ab5f96ce\",\"idJson\":\"e4390db1-342b-4f1b-801b-dc7e8540b649\",\"descricao\":\"PADRÃO\",\"posicao\":1,\"grupoSemaforico\":{\"idJson\":\"32423001-0eb5-40ad-8eb6-f0884280fb6c\"},\"tabelaEntreVerdesTransicoes\":[{\"idJson\":\"2234f209-52da-40ee-a716-ec55c1af0796\"},{\"idJson\":\"7c194d5c-ac0b-4617-9d15-5f7d73469890\"}]},{\"id\":\"16548f05-6e15-43df-85c2-db6fa05b1949\",\"idJson\":\"c141a89c-7137-4b67-ad17-060eaaabe928\",\"descricao\":\"PADRÃO\",\"posicao\":1,\"grupoSemaforico\":{\"idJson\":\"ed688254-c735-41c5-a832-6d1581abddbf\"},\"tabelaEntreVerdesTransicoes\":[{\"idJson\":\"5b25d5c2-34fc-4e42-a4bc-7236b8bac282\"},{\"idJson\":\"a2c5a43f-9963-4c7c-880b-bd34201c430f\"}]}],\"tabelasEntreVerdesTransicoes\":[{\"id\":\"37a1a785-f22e-4608-9cc6-dbc66350c96b\",\"idJson\":\"3864c39a-e021-45e1-b289-f6b8b7d8be99\",\"tempoAmarelo\":\"4\",\"tempoVermelhoLimpeza\":\"7\",\"tempoAtrasoGrupo\":\"0\",\"tabelaEntreVerdes\":{\"idJson\":\"c19f1df8-0431-4862-abd2-227d86b4dd75\"},\"transicao\":{\"idJson\":\"8c2670ad-d43b-4f9d-bee2-8eb9e39f260c\"}},{\"id\":\"f1910675-ef3f-40ad-8617-39da8da3a033\",\"idJson\":\"a2c5a43f-9963-4c7c-880b-bd34201c430f\",\"tempoAmarelo\":\"4\",\"tempoVermelhoLimpeza\":\"5\",\"tempoAtrasoGrupo\":\"8\",\"tabelaEntreVerdes\":{\"idJson\":\"c141a89c-7137-4b67-ad17-060eaaabe928\"},\"transicao\":{\"idJson\":\"0098bc1c-224a-4eab-81c4-57f08cc0c015\"}},{\"id\":\"a13cac4c-3135-455b-b5a0-7999483de68e\",\"idJson\":\"496b48f5-41d3-4d4b-bebb-e7f3f47af208\",\"tempoAmarelo\":\"5\",\"tempoVermelhoLimpeza\":\"7\",\"tempoAtrasoGrupo\":\"3\",\"tabelaEntreVerdes\":{\"idJson\":\"c19f1df8-0431-4862-abd2-227d86b4dd75\"},\"transicao\":{\"idJson\":\"2d4b9eca-e19d-46d3-b0d0-81d4aeb9e1bd\"}},{\"id\":\"8da213ee-4ee8-47bf-b94a-e916cb6108e7\",\"idJson\":\"5b25d5c2-34fc-4e42-a4bc-7236b8bac282\",\"tempoAmarelo\":\"4\",\"tempoVermelhoLimpeza\":\"3\",\"tempoAtrasoGrupo\":\"0\",\"tabelaEntreVerdes\":{\"idJson\":\"c141a89c-7137-4b67-ad17-060eaaabe928\"},\"transicao\":{\"idJson\":\"411745e8-6af8-49a7-bf5c-337914ebb84d\"}},{\"id\":\"a60053ec-766e-4cf0-beaa-fe7960ff0849\",\"idJson\":\"7c194d5c-ac0b-4617-9d15-5f7d73469890\",\"tempoVermelhoIntermitente\":\"7\",\"tempoVermelhoLimpeza\":\"1\",\"tempoAtrasoGrupo\":\"0\",\"tabelaEntreVerdes\":{\"idJson\":\"e4390db1-342b-4f1b-801b-dc7e8540b649\"},\"transicao\":{\"idJson\":\"c2f31707-d6b1-43ea-8f52-392edae55140\"}},{\"id\":\"95ca070a-7584-411b-b496-0d7c69176e51\",\"idJson\":\"2234f209-52da-40ee-a716-ec55c1af0796\",\"tempoVermelhoIntermitente\":\"13\",\"tempoVermelhoLimpeza\":\"2\",\"tempoAtrasoGrupo\":\"0\",\"tabelaEntreVerdes\":{\"idJson\":\"e4390db1-342b-4f1b-801b-dc7e8540b649\"},\"transicao\":{\"idJson\":\"91f86ac8-137d-4efe-af0c-83fec25e7374\"}}],\"planos\":[{\"id\":\"4cfefd4a-7c22-4485-8f09-445e15f7397f\",\"idJson\":\"5e496875-25fd-427a-91ca-f0ebfd2bd857\",\"posicao\":1,\"descricao\":\"PLANO 1\",\"tempoCiclo\":138,\"defasagem\":14,\"posicaoTabelaEntreVerde\":1,\"modoOperacao\":\"TEMPO_FIXO_COORDENADO\",\"dataCriacao\":\"28/11/2016 17:57:05\",\"dataAtualizacao\":\"28/11/2016 18:00:32\",\"anel\":{\"idJson\":\"76367806-91ad-4aab-a29f-c94bf7e7f7b6\"},\"versaoPlano\":{\"idJson\":\"dbffeba4-9382-4f0d-af77-b481c61d9095\"},\"estagiosPlanos\":[{\"idJson\":\"c412ba44-9155-4668-ac91-051032028340\"},{\"idJson\":\"f27eab33-759f-4054-8052-afb8dbb10f44\"},{\"idJson\":\"21915fe2-91d1-40c2-a1b2-481d29a5fbf6\"}],\"gruposSemaforicosPlanos\":[{\"idJson\":\"b1ddbf2f-2f6b-4b58-9902-993fda0f049f\"},{\"idJson\":\"91862c0c-1739-4220-bb99-7686592b5953\"},{\"idJson\":\"4ea8c6c4-9b45-479c-8d93-997b4b93fdc8\"}]}],\"gruposSemaforicosPlanos\":[{\"id\":\"5ba4b8cd-1bf9-4022-a427-c25591ef726e\",\"idJson\":\"b1ddbf2f-2f6b-4b58-9902-993fda0f049f\",\"plano\":{\"idJson\":\"5e496875-25fd-427a-91ca-f0ebfd2bd857\"},\"grupoSemaforico\":{\"idJson\":\"ed688254-c735-41c5-a832-6d1581abddbf\"},\"ativado\":true},{\"id\":\"78613ab7-f923-416c-bb49-df7def126c40\",\"idJson\":\"91862c0c-1739-4220-bb99-7686592b5953\",\"plano\":{\"idJson\":\"5e496875-25fd-427a-91ca-f0ebfd2bd857\"},\"grupoSemaforico\":{\"idJson\":\"32423001-0eb5-40ad-8eb6-f0884280fb6c\"},\"ativado\":true},{\"id\":\"b5057777-2248-4ba7-9b54-c74250cdf05b\",\"idJson\":\"4ea8c6c4-9b45-479c-8d93-997b4b93fdc8\",\"plano\":{\"idJson\":\"5e496875-25fd-427a-91ca-f0ebfd2bd857\"},\"grupoSemaforico\":{\"idJson\":\"99967b89-c86e-481b-baa3-006abeac68b4\"},\"ativado\":true}],\"estagiosPlanos\":[{\"id\":\"e8fcae09-960e-4252-b4eb-90036d1b8312\",\"idJson\":\"21915fe2-91d1-40c2-a1b2-481d29a5fbf6\",\"posicao\":2,\"tempoVerde\":10,\"dispensavel\":false,\"plano\":{\"idJson\":\"5e496875-25fd-427a-91ca-f0ebfd2bd857\"},\"estagio\":{\"idJson\":\"04a3a4c3-50bc-4457-9761-64936a0bb51a\"}},{\"id\":\"50364717-73d8-455a-a143-8f6f805d25bc\",\"idJson\":\"f27eab33-759f-4054-8052-afb8dbb10f44\",\"posicao\":3,\"tempoVerde\":4,\"dispensavel\":false,\"plano\":{\"idJson\":\"5e496875-25fd-427a-91ca-f0ebfd2bd857\"},\"estagio\":{\"idJson\":\"d934011e-2b46-4992-9ac8-c4d9855c2bed\"}},{\"id\":\"39cd0450-bd08-4cc6-91ef-1ec7328b24cc\",\"idJson\":\"c412ba44-9155-4668-ac91-051032028340\",\"posicao\":1,\"tempoVerde\":91,\"dispensavel\":false,\"plano\":{\"idJson\":\"5e496875-25fd-427a-91ca-f0ebfd2bd857\"},\"estagio\":{\"idJson\":\"29eabd04-3cf0-421c-a52a-e34b10d6cc0a\"}}],\"cidades\":[{\"id\":\"011efdb6-b59e-11e6-970d-0401fa9c1b01\",\"idJson\":\"011f0dcf-b59e-11e6-970d-0401fa9c1b01\",\"nome\":\"São Paulo\",\"areas\":[{\"idJson\":\"011f16c3-b59e-11e6-970d-0401fa9c1b01\"}]}],\"areas\":[{\"id\":\"011effc7-b59e-11e6-970d-0401fa9c1b01\",\"idJson\":\"011f16c3-b59e-11e6-970d-0401fa9c1b01\",\"descricao\":1,\"cidade\":{\"idJson\":\"011f0dcf-b59e-11e6-970d-0401fa9c1b01\"},\"limites\":[],\"subareas\":[]}],\"limites\":[],\"todosEnderecos\":[{\"id\":\"9befb8a4-f55a-441c-b0b6-b984f6c861b2\",\"idJson\":\"ba1e6e7d-7a41-4865-8956-0f628b2c45b5\",\"localizacao\":\"R. Aspicuelta\",\"latitude\":-23.5573747,\"longitude\":-46.689122999999995,\"localizacao2\":\"\",\"alturaNumerica\":12},{\"id\":\"a654819f-fce3-4a6c-8073-50fae7b302a4\",\"idJson\":\"a76a8215-10d3-4134-996d-00c1a588d0e3\",\"localizacao\":\"R. Aspicuelta\",\"latitude\":-23.5573747,\"longitude\":-46.689122999999995,\"localizacao2\":\"\",\"alturaNumerica\":12}],\"imagens\":[{\"id\":\"8191603b-1763-47e9-aff6-2657e1b771ae\",\"idJson\":\"03444c62-1d1e-4a54-955c-ffdc3e761cb1\",\"fileName\":\"anel1_est3.jpg\",\"contentType\":\"image/jpeg\"},{\"id\":\"a774326a-4179-44be-a896-67909c663d51\",\"idJson\":\"eb1ab4ef-9e7f-4cd0-bfc1-68cfae9137e6\",\"fileName\":\"anel1_est2.jpg\",\"contentType\":\"image/jpeg\"},{\"id\":\"0f5a1c9e-34b2-4f1e-96aa-aeebb3b1966c\",\"idJson\":\"d2faeca8-6bf8-4b39-9ecb-077d5926f573\",\"fileName\":\"anel1_est1.jpg\",\"contentType\":\"image/jpeg\"}],\"atrasosDeGrupo\":[{\"id\":\"666f9573-2af1-4d6b-a73e-145c0264aa97\",\"idJson\":\"0e1d4d6c-7029-4129-a32c-31381775c1fc\",\"atrasoDeGrupo\":0},{\"id\":\"7112b528-ecbd-4353-9982-17b4d600ab6a\",\"idJson\":\"c7f3393c-210f-420f-addd-439af94562d6\",\"atrasoDeGrupo\":0},{\"id\":\"dea32152-ac75-4442-9fcc-463af117cd75\",\"idJson\":\"68902c53-debd-4e91-b14d-0a6c4d07c49b\",\"atrasoDeGrupo\":8},{\"id\":\"b7635240-1324-4372-a588-a1bb1f4899a3\",\"idJson\":\"98aa52c7-6e94-4f98-952d-0c00988d5583\",\"atrasoDeGrupo\":0},{\"id\":\"c34779e2-db66-466f-bf8e-0310e96e4119\",\"idJson\":\"dace7f1a-0f11-4005-8581-2342d6a5db60\",\"atrasoDeGrupo\":0},{\"id\":\"1efc20e8-15ab-444b-b7aa-1682177ea8bf\",\"idJson\":\"d35d6a1d-cfc8-44be-bfcc-cea874eab7ec\",\"atrasoDeGrupo\":0},{\"id\":\"2f6235ee-fe4e-4b73-bebc-fba0b69f7d35\",\"idJson\":\"e8c8f964-6a45-477e-9674-7927e226af33\",\"atrasoDeGrupo\":3},{\"id\":\"f79a1bff-bdb6-4d1c-b9da-e605de7a7f3d\",\"idJson\":\"7844c8e7-061a-4f72-8916-0a8129c065a9\",\"atrasoDeGrupo\":9},{\"id\":\"c45287d0-63d2-4e60-aa42-fa2d2e16313b\",\"idJson\":\"f65ec46e-9f38-48d9-8042-e0ba9319e712\",\"atrasoDeGrupo\":0},{\"id\":\"19261402-da71-4281-acf6-527157c14adf\",\"idJson\":\"17ea15ba-ab9d-41ce-b521-b3356c7af984\",\"atrasoDeGrupo\":0},{\"id\":\"0370c2a8-a9db-458b-b539-87083143bac1\",\"idJson\":\"d79ebc95-b25c-411d-a830-c69b2d4b460b\",\"atrasoDeGrupo\":0},{\"id\":\"c745e66c-0aaa-44ee-b61f-1b285302eb8c\",\"idJson\":\"2d4d4b20-e270-4e79-8e55-9d0f8135e9e8\",\"atrasoDeGrupo\":0}],\"versaoControlador\":{\"id\":\"547f36d1-407b-440f-8e59-6d1b4ff00499\",\"idJson\":null,\"descricao\":\"Controlador criado pelo usuário: Rodrigo Sol\",\"statusVersao\":\"EM_CONFIGURACAO\",\"controlador\":{\"id\":\"1330eb94-f9ae-4010-ac77-4e82b0d17f7d\"},\"controladorFisico\":{\"id\":\"cd5c5720-0689-4326-836a-596f237a11ff\"},\"usuario\":{\"id\":\"d4d6dae1-16b2-4db5-80d4-917fe810382c\",\"nome\":\"Rodrigo Sol\",\"login\":\"rodrigosol\",\"email\":\"rodrigo@rarolabs.com.br\",\"area\":{\"idJson\":\"011f16c3-b59e-11e6-970d-0401fa9c1b01\"}}},\"statusVersao\":\"EM_CONFIGURACAO\",");
        controladorJson.append("\"versoesPlanos\":[{\"id\":\"751f9fc2-a946-4b58-b548-4d9fdbaa68d6\",\"idJson\":\"dbffeba4-9382-4f0d-af77-b481c61d9095\",\"statusVersao\":\"EDITANDO\",\"anel\":{\"idJson\":\"76367806-91ad-4aab-a29f-c94bf7e7f7b6\"},\"planos\":[{\"idJson\":\"5e496875-25fd-427a-91ca-f0ebfd2bd857\"}]}],\"tabelasHorarias\":[{\"id\":\"a3daf2dd-95e8-4224-bf5e-5d8480327433\",\"idJson\":\"df0ebbea-4220-4974-89cc-8797bb06176e\",\"versaoTabelaHoraria\":{\"idJson\":\"016ada66-7334-4c3e-8b2d-65a4773cc0b6\"},\"eventos\":[{\"idJson\":\"a58d0dfe-c2eb-48e4-909e-31f1c5a44c92\"}]}],\"eventos\":[{\"id\":\"05a20b23-3f54-4f2e-ac4b-94810c0beb23\",\"idJson\":\"a58d0dfe-c2eb-48e4-909e-31f1c5a44c92\",\"posicao\":\"1\",\"tipo\":\"NORMAL\",\"diaDaSemana\":\"Todos os dias da semana\",\"data\":\"28-11-2016\",\"horario\":\"00:00:00.000\",\"posicaoPlano\":\"1\",\"tabelaHoraria\":{\"idJson\":\"df0ebbea-4220-4974-89cc-8797bb06176e\"}}]}");
        return new ControladorCustomDeserializer().getControladorFromJson(Json.parse(controladorJson.toString()));
    }

    @Test
    public void manualComTempoDoSegundoEstagioMenor() throws IOException {
        inicioExecucao = new DateTime(2016, 11, 28, 0, 0, 0);
        controlador = getControlador();
        Motor motor = new Motor(controlador, inicioExecucao, this);

        avancarSegundos(motor, 300);

        int offsetEstagio = 0;
        int anel1 = 1;
        assertEquals("Primeiro Estágio da Sequência - E2", 2, listaEstagios.get(inicioExecucao.plusSeconds(offsetEstagio)).get(anel1).getEstagio().getPosicao().intValue());
        assertEquals("Primeiro Estágio da Sequência", 2, listaEstagios.get(inicioExecucao.plusSeconds(offsetEstagio)).get(anel1).getEstagioPlano().getPosicao().intValue());
        verificaGruposSemaforicos(offsetEstagio, new GrupoCheck(anel1, 1, 0, 5000, EstadoGrupoSemaforico.AMARELO_INTERMITENTE));
        verificaGruposSemaforicos(offsetEstagio, new GrupoCheck(anel1, 1, 5000, 8000, EstadoGrupoSemaforico.VERMELHO));
        verificaGruposSemaforicos(offsetEstagio, new GrupoCheck(anel1, 1, 8000, 18000, EstadoGrupoSemaforico.VERMELHO));

        verificaGruposSemaforicos(offsetEstagio, new GrupoCheck(anel1, 2, 0, 5000, EstadoGrupoSemaforico.AMARELO_INTERMITENTE));
        verificaGruposSemaforicos(offsetEstagio, new GrupoCheck(anel1, 2, 5000, 8000, EstadoGrupoSemaforico.VERMELHO));
        verificaGruposSemaforicos(offsetEstagio, new GrupoCheck(anel1, 2, 8000, 18000, EstadoGrupoSemaforico.VERDE));

        verificaGruposSemaforicos(offsetEstagio, new GrupoCheck(anel1, 3, 0, 5000, EstadoGrupoSemaforico.DESLIGADO));
        verificaGruposSemaforicos(offsetEstagio, new GrupoCheck(anel1, 3, 5000, 8000, EstadoGrupoSemaforico.VERMELHO));
        verificaGruposSemaforicos(offsetEstagio, new GrupoCheck(anel1, 3, 8000, 18000, EstadoGrupoSemaforico.VERMELHO));

        offsetEstagio = 18;

        assertEquals("Primeiro Estágio da Sequência - E3", 3, listaEstagios.get(inicioExecucao.plusSeconds(offsetEstagio)).get(anel1).getEstagio().getPosicao().intValue());
        assertEquals("Primeiro Estágio da Sequência", 3, listaEstagios.get(inicioExecucao.plusSeconds(offsetEstagio)).get(anel1).getEstagioPlano().getPosicao().intValue());
        verificaGruposSemaforicos(offsetEstagio, new GrupoCheck(anel1, 1, 0, 7000, EstadoGrupoSemaforico.VERMELHO));
        verificaGruposSemaforicos(offsetEstagio, new GrupoCheck(anel1, 1, 7000, 11000, EstadoGrupoSemaforico.VERMELHO));

        verificaGruposSemaforicos(offsetEstagio, new GrupoCheck(anel1, 2, 0, 4000, EstadoGrupoSemaforico.AMARELO));
        verificaGruposSemaforicos(offsetEstagio, new GrupoCheck(anel1, 2, 4000, 7000, EstadoGrupoSemaforico.VERMELHO_LIMPEZA));
        verificaGruposSemaforicos(offsetEstagio, new GrupoCheck(anel1, 2, 7000, 11000, EstadoGrupoSemaforico.VERMELHO));

        verificaGruposSemaforicos(offsetEstagio, new GrupoCheck(anel1, 3, 0, 7000, EstadoGrupoSemaforico.VERMELHO));
        verificaGruposSemaforicos(offsetEstagio, new GrupoCheck(anel1, 3, 7000, 11000, EstadoGrupoSemaforico.VERDE));
    }

    @Test
    public void marcaAtivacaoEDesativacaoDoModoManual() throws IOException {
        inicioExecucao = new DateTime(2016, 11, 28, 0, 0, 0);
        controlador = getControlador();
        Motor motor = new Motor(controlador, inicioExecucao, this);

        avancarSegundos(motor, 4);
        acionarModoManual(motor);
        avancarSegundos(motor, 500);

        int anel1 = 1;
        assertEquals("Estágio", 2, listaEstagios.get(inicioExecucao.plusSeconds(0)).get(anel1).getEstagio().getPosicao().intValue());
        assertEquals("Estágio", 3, listaEstagios.get(inicioExecucao.plusSeconds(18)).get(anel1).getEstagio().getPosicao().intValue());
        assertEquals("Estágio", 1, listaEstagios.get(inicioExecucao.plusSeconds(29)).get(anel1).getEstagio().getPosicao().intValue());

        assertEquals("Estágio", 1, listaEstagios.get(inicioExecucao.plusSeconds(171)).get(anel1).getEstagio().getPosicao().intValue());

        assertTrue(ativacaoModoManual.get(inicioExecucao.plusSeconds(29)));
        assertTrue(desativacaoModoManual.get(inicioExecucao.plusSeconds(171)));
    }

}
