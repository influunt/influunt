<fieldset data-ng-init="inicializaTransicoesProibidas()">

  <script>
    $(function(){
      $( ".tabpanel" ).tabs({closable: false, addTab:false}).tabs('overflowResize')
      .find( ".ui-tabs-nav" ).sortable({
        distance: 10
      });
    });
  </script>

  <div class="m-t-md">
    <div class="col-lg-12 col-sm-12 bg-border no-padding">
      <div class="ibox float-e-margins">
        <div class="tabpanel">
          <div class="col-lg-12 col-sm-12 padding-top-20 tabs-container">
            <ul class="nav nav-tabs">
              <li class=""><a class="" data-toggle="tab" href="#tabs-1" aria-expanded="false">{{ 'controladores.anel' | translate }} {{ currentAnel.posicao }}</a></li>
              <li class=""><a class="" data-toggle="tab" href="#tabs-2" aria-expanded="false">{{ 'controladores.anel' | translate }} 02</a></li>
              <li class=""><a class="" data-toggle="tab" href="#tabs-3" aria-expanded="false">{{ 'controladores.anel' | translate }} 03</a></li>
            </ul>
            <div class="ui-layout-content tab-content">
              <div id="tabs-1">
                <div class="col-lg-12 col-sm-12 text-left">
                  <h2>{{ 'controladores.anel' | translate }} {{anel.posicao}}</h2>
                </div>

                <div class="col-lg-12 col-sm-12 early-stage no-padding">
                  <article class="col-lg-12 col-sm-12 no-padding early-area">
                    <nav>
                      <ul>
                        <li data-ng-repeat="estagio in currentAnel.estagios">
                            <header role="heading">
                              <h1>E{{ $index + 1 }} oi</h1>
                            </header>
                            <figure>
                              <img ng-src="{{ estagio.imagem.id | imageSource }}" style="width: 200px; height: 155px;">
                            </figure>
                        </li>
                      </ul>
                    </nav>
                  </article>
                </div>

                <div class="col-lg-10 col-sm-10 early-stage no-padding tableless tableless-stages">
                  <ng-include src="'views/controladores/wizard/tabela-estagios-proibidos.html'"></ng-include="template"></ng-include>
                </div>

                <div class="col-lg-2 col-sm-2 no-padding-right">

                  <div class="col-lg-12 col-sm-12 association alternative m-t-md">
                    <h1>Estágios alternativos</h1>
                    <div class="col-lg-6">
                      <p>Transição proibida</p>
                      <nav>
                        <ul>
                          <li data-ng-repeat="(key, value) in currentAnel.transicoesProibidas">
                            <h1>{{ key }}</h1>
                          </li>
                        </ul>
                      </nav>
                    </div>
                    <div class="col-lg-6">
                      <p>Alternativa</p>
                      <nav>
                        <ul>
                          <li data-ng-repeat="(key, value) in currentAnel.transicoesProibidas" id="estagio-alternativo-{{ key }}"
                            data-ng-class="{'has-error': getErrosEstagiosAlternativos(value.origem, value.destino)}">
                            <select ng-model="value.alternativo.id" class="form-control"
                              data-ng-options="estagio.id as ('E' + estagio.posicao) for estagio in currentAnel.estagios | filter:filterEstagiosAlternativos(value.origem, value.destino)"
                              data-ng-change="marcarTransicaoAlternativa(value)"
                              inf-tooltip
                              messages="getErrosEstagiosAlternativos(value.origem, value.destino)">
                            </select>

                            <span class="badge badge-danger badge-estagio-alternativo pull-right"
                              data-ng-if="getErrosEstagiosAlternativos(value.origem, value.destino)">
                              <i class="fa fa-exclamation"></i>
                            </span>
                          </li>
                        </ul>
                      </nav>
                    </div>
                  </div>
                </div>

              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

	<div class="row">
    <div class="col-sm-12 col-lg-12 bg-border-footer pg-bt-footer actions clearfix">
			<a ui-sref="app.wizard_controladores.verdes_conflitantes({id: objeto.id})" target="_blank" data-toggle="tooltip" data-placement="top" class="left btn btn-info btn-footer" title="Ver Tela de Verdes Conflitantes">{{ 'plugins.steps.labels.last_screen' | translate }}</a>
      <a data-ng-click="submitForm({$valid: true}, 'transicoes_proibidas', 'app.wizard_controladores.entre_verdes')" data-toggle="tooltip" data-placement="top" title="Entre Verdes" class="btn btn-primary btn-footer right">{{ 'plugins.steps.labels.next' | translate }}</a>
      <a data-ng-click="submitForm({$valid: true}, 'transicoes_proibidas', 'app.wizard_controladores.associacao')" data-toggle="tooltip" data-placement="top" title="Verdes Conflitantes" class="btn btn-inverse btn-footer right m-r-sm">{{ 'plugins.steps.labels.previous' | translate }}</a>
    </div>
  </div>

</fieldset>
