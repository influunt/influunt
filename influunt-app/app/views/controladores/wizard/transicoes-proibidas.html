<fieldset data-ng-init="inicializaTransicoesProibidas()">

  <div class="m-t-md">
    <div class="col-lg-12 col-sm-12 bg-border no-padding">
      <div class="ibox float-e-margins">
        <div class="tabpanel">
          <div class="col-lg-12 col-sm-12 padding-top-20 tabs-container">
            <influunt-tabs class="tabpanel"
                           data-on-activate="selecionaAnelTransicoesProibidas"
                           data-aneis-ativos="aneis"
                           data-error-check="anelTemErro">
            </influunt-tabs>
            <div class="ui-layout-content tab-content">
              <div id="tabs-1">
                <div class="col-lg-12 col-sm-12 padding-top-20">
                  <h3>{{ 'controladores.estagios.titulo' | translate }}</h3>
                </div>
                <div class="col-lg-12 col-sm-12 early-stage no-padding">
                  <div class="col-lg-12 col-sm-12 figures no-padding ibox-content">
                    <div class="bxslider">
                      <ul class="bxslider">
                        <li data-ng-repeat="estagio in currentEstagios" class="stage-images">
                          <h4>E{{ estagio.posicao }}</h4>
                          <figure>
                            <img ng-src="{{ getImagemDeEstagio(estagio) }}">
                          </figure>
                        </li>
                      </ul>
                    </div>
                  </div>
                </div>

                <div class="col-lg-3 col-sm-3 no-padding-left">
                  <div class="col-lg-12 col-sm-12 association alternative m-t-md">
                    <div class="col-lg-12 col-sm-12"><h1>Estágios alternativos</h1></div>
                    <div class="col-lg-6 col-sm-6">
                      <p>Transição proibida</p>
                      <nav>
                        <ul>
                          <li data-ng-repeat="(key, value) in currentTransicoesProibidas">
                            <h1>{{ key }}</h1>
                          </li>
                        </ul>
                      </nav>
                    </div>
                    <div class="col-lg-6 col-sm-6">
                      <p>Alternativa</p>
                      <nav>
                        <ul>
                          <li data-ng-repeat="(key, value) in currentTransicoesProibidas" id="estagio-alternativo-{{ key }}"
                            data-ng-class="{'has-error': getErrosEstagiosAlternativos(value.origem, value.destino)}">
                            <select ng-model="value.alternativo.idJson" class="form-control"
                              data-ng-options="estagio.idJson as ('E' + estagio.posicao) for estagio in currentEstagios | filter:filterEstagiosAlternativos(value.origem, value.destino)"
                              data-ng-change="marcarTransicaoAlternativa(value)"
                              inf-tooltip
                              messages="getErrosEstagiosAlternativos(value.origem, value.destino)"
                              name="alternativos">
                            </select>

                            <span class="badge badge-danger badge-estagio-alternativo pull-right"
                              data-ng-if="getErrosEstagiosAlternativos(value.origem, value.destino)"
                              inf-tooltip
                              messages="getErrosEstagiosAlternativos(value.origem, value.destino)">
                              <i class="fa fa-exclamation"></i>
                            </span>
                          </li>
                        </ul>
                      </nav>
                    </div>
                  </div>
                </div>
                <div class="col-lg-9 col-sm-9 early-stage no-padding tableless tableless-stages">
                  <ng-include src="'views/controladores/wizard/tabela-estagios-proibidos.html'"></ng-include="template"></ng-include>
                </div>

              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

	<div class="row">
    <div class="col-sm-12 col-lg-12 pg-bt-footer padding-top-20" data-ng-if="objeto.transicoesProibidas.length === 0">
      <div class="right">
        <input type="checkbox" ichecks data-ng-model="confirmacao" data-if-changed="confirmacaoNadaHaPreencher()">
        <span>{{ 'plugins.steps.confirmation' | translate }}</span>
      </div>
    </div>

    <div class="col-sm-12 col-lg-12 bg-border-footer pg-bt-footer actions clearfix">
      <a data-toggle="modal" data-target="#myModal" class="left btn btn-info btn-footer" tooltips tooltip-template="{{ 'plugins.steps.labels.last_screen' | translate }}">
        <i class="fa fa-eye"></i> {{ 'plugins.steps.labels.last_screen' | translate }}
      </a>
      <div class="right">
        <a data-ng-if="podeSalvar()" go-to-top data-ng-click="submitForm({$valid: true}, 'transicoes_proibidas', 'app.wizard_controladores.atraso_de_grupo')" tooltips tooltip-template="<b>{{ 'geral.tooltip.salvarAvancarPara' | translate }}</b> {{ 'controladores.atrasoDeGrupo.titulo' | translate }}" class="go-to-top btn btn-primary btn-footer right">
          {{ 'plugins.steps.labels.saveNext' | translate }} <i class="fa fa-arrow-right"></i>
        </a>
        <a data-ng-if="!podeSalvar()" disabled="disabled" tooltips tooltip-template="<b><span>{{ 'geral.tooltip.naoPodeSalvarSemConfirmacao' | translate }}</span></b>" class="go-to-top btn btn-primary btn-footer right">
          {{ 'plugins.steps.labels.saveNext' | translate }} <i class="fa fa-arrow-right"></i>
        </a>
      </div>
      <div class="right">
        <a data-ng-if="podeSalvar()" go-to-top data-ng-click="submitForm({$valid: true}, 'transicoes_proibidas', 'app.wizard_controladores.associacao')" tooltips tooltip-template="<b>{{ 'geral.tooltip.salvarVoltarPara' | translate }}</b> {{ 'controladores.associacao.titulo' | translate }}" class="btn btn-outline btn-primary btn-footer right m-r-sm right">
          <i class="fa fa-arrow-left"></i> {{ 'plugins.steps.labels.saveBack' | translate }}
        </a>
        <a data-ng-if="!podeSalvar()" disabled="disabled" tooltips tooltip-template="<b><span>{{ 'geral.tooltip.naoPodeSalvarSemConfirmacao' | translate }}</span></b>" class="btn btn-primary btn-footer right m-r-sm right">
          <i class="fa fa-arrow-left"></i> {{ 'plugins.steps.labels.saveBack' | translate }}
        </a>
      </div>
      <div class="right">
        <a data-ng-click="voltarSemSalvar('app.wizard_controladores.associacao')" tooltips tooltip-template="<b><span>{{ 'geral.tooltip.voltarSemPara' | translate }}</span></b> {{ 'controladores.associacao.titulo' | translate }}" class="btn btn-outline btn-primary btn-footer right m-r-sm right">
          <i class="fa fa-arrow-left"></i> {{ 'plugins.steps.labels.back' | translate }}
        </a>
      </div>
    </div>
  </div>

</fieldset>

<div class="modal inmodal" id="myModal" tabindex="-1" role="dialog" aria-hidden="true">
  <div class="modal-dialog" style="width: 95%;">
    <div class="modal-content animated bounceInRight">
      <div class="modal-header">
        <influunt-revisao objeto="objeto" data-ng-controller="ControladoresRevisaoCtrl" data-show-footer="false"></influunt-revisao>
      </div>

      <div class="modal-footer">
        <button type="button" class="btn btn-primary" data-dismiss="modal">Fechar</button>
      </div>
    </div>
  </div>
</div>
