<pesquisa-lateral
    data-ng-model="pesquisa.filtro"
    campos="pesquisa.campos"
    on-close="index()">
</pesquisa-lateral>

<div class="wrapper wrapper-content animated fadeInRight" data-ng-init="index()">
  <div class="row">
    <div class="col-lg-12">
      <div class="ibox float-e-margins">
        <div class="ibox-title">
          <h5>{{ pageTitle | translate }}</h5>
        </div>
        <div class="ibox-content">

          <!-- botÃ£o de nova area -->
          <div class="pull-right actions">
            <a class="btn btn-small btn-primary btn-rounded" tooltips tooltip-template="{{ 'subareas.adicionar' | translate }}" ui-sref="app.subareas_new" permission permission-sref="'app.subareas_new'">
              <i class="fa fa-plus"></i>
              {{ 'geral.crud.novo' | translate }}
            </a>
          </div>

          <table datatable="ng" dt-options="datatables.options" dt-instance="datatables.instance" class="table table-striped table-bordered table-hover">
            <div class="table">
              <thead>
                <tr>
                  <th sortable-th
                    data-ng-model="pesquisa"
                    data-name="area.cidade.nome"
                    data-label="{{ 'areas.cidade' | translate }}"
                    data-ng-click="index()">
                  </th>
                  <th sortable-th
                    data-ng-model="pesquisa"
                    data-name="area.descricao"
                    data-label="{{ 'subareas.area' | translate }}"
                    data-ng-click="index()">
                  <th sortable-th
                    data-ng-model="pesquisa"
                    data-name="nome"
                    data-label="{{ 'subareas.nome' | translate }}"
                    data-ng-click="index()">
                  </th>
                  <th sortable-th
                    data-ng-model="pesquisa"
                    data-name="numero"
                    data-label="{{ 'subareas.numero' | translate }}"
                    data-ng-click="index()">
                  <th>{{ 'geral.crud.opcoes' | translate }}</th>
                </tr>
              </thead>
              <tbody>
                <tr data-ng-repeat="subarea in lista">
                  <td>{{ subarea.area.cidade | resourceToString }}</td>
                  <td>{{ subarea.area | resourceToString:'descricao' }}</td>
                  <td>{{ subarea.nome }}</td>
                  <td>{{ subarea.numero }}</td>
                  <td>
                    <a ui-sref="app.subareas_tabela_horaria({id: subarea.id})" data-ng-if="subarea.controladores.length > 0" permission permission-sref="'app.subareas_tabela_horaria'" class="btn btn-primary btn-xs">{{ 'subareas.tabelaHoraria' | translate }}</a>
                    <span data-ng-if="subarea.controladores.length <= 0" disabled="disabled" tooltips tooltip-template="{{ 'subareas.naoPossuiControlador' | translate }}" permission permission-sref="'app.subareas_tabela_horaria'" class="btn btn-primary btn-xs">{{ 'subareas.tabelaHoraria' | translate }}</span>
                    <a ui-sref="app.subareas_show({id: subarea.id})" permission permission-sref="'app.subareas_show'" class="btn btn-primary btn-xs">{{ 'geral.crud.visualizar' | translate }}</a>
                    <a ui-sref="app.subareas_edit({id: subarea.id})" permission permission-sref="'app.subareas_edit'" class="btn btn-primary btn-xs">{{ 'geral.crud.editar' | translate }}</a>
                    <a data-ng-click="confirmDelete(subarea.id)" permission permission-only="'removerSubareas'" class="btn btn-danger btn-xs">{{ 'geral.crud.excluir' | translate }}</a>
                  </td>
                </tr>
              </tbody>
            </div>
          </table>

          <ng-include src="'views/common/footer-pagination.html'"></ng-include>
        </div>
      </div>
    </div>
  </div>
</div>
